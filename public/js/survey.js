"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[999],{4650:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(3645),o=a.n(n)()((function(e){return e[1]}));o.push([e.id,".loading[data-v-0312ef9a]{color:#a51e36;font-size:1.5rem}.thank-you-message[data-v-0312ef9a]{align-items:center;display:flex;justify-content:center;min-height:inherit;text-align:center}form .form-text[data-v-0312ef9a]{line-height:1.6;margin-bottom:10px;margin-top:0}form .form-text a[data-v-0312ef9a]{font-size:inherit}form .form-text a[data-v-0312ef9a]:hover{text-decoration:none}form label[data-v-0312ef9a]{font-weight:700}form .ranked-options .ranked-option[data-v-0312ef9a]{float:left;margin-bottom:5px;width:50%}form .ranked-options .ranked-option[data-v-0312ef9a]:hover{cursor:pointer}@media (max-width:767px){form .ranked-options .ranked-option[data-v-0312ef9a]{width:100%}}form .ranked-options .ranked-option .option-rank[data-v-0312ef9a],form .ranked-options .ranked-option input[data-v-0312ef9a],form .ranked-options .ranked-option label[data-v-0312ef9a]{float:left}form .ranked-options .ranked-option label[data-v-0312ef9a]{padding:2px 15px}@media (max-width:767px){form .ranked-options .ranked-option label[data-v-0312ef9a]{font-size:.9rem}}form .ranked-options .ranked-option label[data-v-0312ef9a]:hover{cursor:pointer}form .ranked-options .ranked-option .option-rank[data-v-0312ef9a],form .ranked-options .ranked-option input[data-v-0312ef9a]{border:1px solid #ced4da;border-radius:.25rem;min-height:38px;text-align:center;width:50px}form .ranked-options .ranked-option textarea.option-extra[data-v-0312ef9a]{text-align:left;width:400px}",""]);const r=o},875:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});const n={name:"survey-page",data:function(){return{loading:!1,formCompleted:!1,alert:{message:""},serverErrors:null,survey:{name:"",surveyData:{},source:""},optionRankIndex:1,surveyQuestions:[{question:"What are the most important issues regarding Thorold? (Rank top 3)",type:"ranked",availableOptions:[{rank:"",option:"Affordable Housing"},{rank:"",option:"By-Law Enforcement"},{rank:"",option:"Economic Development"},{rank:"",option:"Employment"},{rank:"",option:"Environment"},{rank:"",option:"Historical Preservation"},{rank:"",option:"Policing"},{rank:"",option:"Public Transportation"},{rank:"",option:"Recreational Facilities"},{rank:"",option:"Road Infrastructure"},{rank:"",option:"Student Issues"},{rank:"",option:"Taxation"},{rank:"",option:"Water & Sewer Infrastructure"},{rank:"",option:"Other",extra:!0,extraValue:""}],answer:""},{question:"What is the City of Thorold doing right?",type:"textarea",answer:""},{question:"Where does the City of Thorold need improvement?",type:"textarea",answer:""},{question:"What cultural or recreational facilities does the City of Thorold need?",type:"textarea",answer:""},{question:"What environmental initatives should the City of Thorold support?",type:"textarea",answer:""},{question:"Do you have any additional comments?",type:"textarea",answer:""}]}},methods:{submitSurvey:function(){var e=this;e.loading=!0,e.alert.message=null,e.serverErrors=null,e.survey.source=e.guessDeviceSource(),e.survey.surveyData=e.surveyQuestions,window.axios.post(e.API_ROUTE+"form-submissions/survey",e.survey).then((function(t){e.serverErrors=null,e.alert.message=t.data.message;for(var a=0;a<e.surveyQuestions.length;a++){if(e.surveyQuestions[a].answer="","ranked"===e.surveyQuestions[a].type)for(var n=0;n<e.surveyQuestions[a].availableOptions.length;n++)e.surveyQuestions[a].availableOptions[n].rank="",e.surveyQuestions[a].availableOptions[n].extra&&(e.surveyQuestions[a].availableOptions[n].extraValue="");e.surveyQuestions[a].hasYesNo&&(e.surveyQuestions[a].yesNoAnswer=null)}e.loading=!1,e.formCompleted=!0})).catch((function(t){t.response.data.errors&&(e.serverErrors=t.response.data.errors),flash(t.response.data.message,"error"),e.loading=!1})),e.scrollToTop()},rankedItemClicked:function(e){e.rank?e.rank>this.optionRankIndex&&(e.rank=this.optionRankIndex,this.optionRankIndex+=1):(e.rank=this.optionRankIndex,this.optionRankIndex+=1)},resetRankedItems:function(){for(var e=this,t=0;t<e.surveyQuestions.length;t++)if("ranked"===e.surveyQuestions[t].type){for(var a=0;a<e.surveyQuestions[t].availableOptions.length;a++)e.surveyQuestions[t].availableOptions[a].rank="";this.optionRankIndex=1}},guessDeviceSource:function(){var e=$(window).width(),t="";switch(!0){case e<768:t="mobile";break;case e<980:t="tablet";break;default:t="desktop"}return t},scrollToTop:function(){var e=this.$el.querySelector("h1");e&&e.scrollIntoView(!1)},determinePlaceholder:function(e){if(e.hasYesNo)return"Why?"}}};var o=a(3379),r=a.n(o),s=a(4650),i={insert:"head",singleton:!1};r()(s.Z,i);s.Z.locals;const l=(0,a(1900).Z)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"page-content main-area"},[e.alert.message?t("div",{staticClass:"thank-you-message",attrs:{role:"alert"}},[t("div",{domProps:{innerHTML:e._s(e.alert.message)}})]):t("div",[t("h1",{staticClass:"mb-3"},[e._v("Please fill out the survey below")]),e._v(" "),t("p",{staticClass:"mb-4"},[e._v("I am gathering data on the important issues facing Thorold. Please complete the\n                questions below so I can better serve you.")])]),e._v(" "),e.serverErrors?t("div",{staticClass:"alert alert-danger"},e._l(e.serverErrors,(function(a,n){return t("li",[a[0]?t("span",[e._v(e._s(a[0]))]):e._e()])})),0):e._e(),e._v(" "),e.loading?t("div",{staticClass:"loading mb-3 text-center"},[t("i",{staticClass:"fa fa-spinner fa-spin",attrs:{"aria-hidden":"true"}}),e._v(" Submitting..\n        ")]):e._e(),e._v(" "),e.loading||e.formCompleted?e._e():t("form",{on:{submit:function(t){return t.preventDefault(),e.submitSurvey.apply(null,arguments)}}},[e._l(e.surveyQuestions,(function(a,n){return t("b-form-group",{key:"survey_question__"+n},[t("label",{attrs:{for:"textarea_"+n}},[e._v(" "+e._s(a.question)+" "),a.link?t("a",{attrs:{target:"_blank",href:a.link}},[e._v(e._s(a.link))]):e._e()]),e._v(" "),"ranked"===a.type?t("b-form-text",[e._v("Click on an issue to rank it.\n                    "),t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.resetRankedItems.apply(null,arguments)}}},[e._v("Click here if you wish to reset the ranking.")])]):e._e(),e._v(" "),"textarea"===a.type?t("div",[a.hasYesNo?t("div",[t("b-form-radio-group",{attrs:{id:"yes_no_"+n,options:a.radios,name:"yes-no-radio"},model:{value:a.yesNoAnswer,callback:function(t){e.$set(a,"yesNoAnswer",t)},expression:"surveyQuestion.yesNoAnswer"}})],1):e._e(),e._v(" "),t("b-form-textarea",{attrs:{id:"textarea_"+n,rows:3,placeholder:e.determinePlaceholder(a)},model:{value:a.answer,callback:function(t){e.$set(a,"answer",t)},expression:"surveyQuestion.answer"}})],1):e._e(),e._v(" "),"ranked"===a.type?t("div",{staticClass:"ranked-options"},[e._l(a.availableOptions,(function(a,n){return t("div",{staticClass:"ranked-option",on:{click:function(t){return e.rankedItemClicked(a)}}},[t("div",{staticClass:"option-rank"},[e._v(" "+e._s(a.rank))]),e._v(" "),t("label",[e._v(e._s(a.option))]),e._v(" "),a.extra?t("b-form-textarea",{staticClass:"option-extra",attrs:{placeholder:"Please explain the issue."},model:{value:a.extraValue,callback:function(t){e.$set(a,"extraValue",t)},expression:"option.extraValue"}}):e._e(),e._v(" "),t("div",{staticClass:"clearfix"})],1)})),e._v(" "),t("div",{staticClass:"clearfix"})],2):e._e()],1)})),e._v(" "),t("b-button",{staticClass:"mb-5",attrs:{type:"submit",variant:"primary"}},[e._v("Submit")])],2)])])}),[],!1,null,"0312ef9a",null).exports}}]);